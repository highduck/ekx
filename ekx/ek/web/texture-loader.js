var EKXTextureLoader=function(e){"use strict";var t=!1;fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e)})).then((function(){return t=!0})).catch();var E=function(){this.id=0,this.total=0,this.loaded=0,this.progress=0,this.w=0,this.h=0,this.images=[],this.texture=null,this.textureID=0,this.gl=null,this.flags=0},r=[null];return e.destroy=function(e){var t=r[e];if(t&&t.images){for(var E=0;E<t.images.length;++E){var a=t.images[E];a&&(a.onload=null,a.src=""),t.images.length=0,t.texture=null,t.total=0,t.id=(t.id+65536&268369920)+(65535&t.id)}return 0}return 1},e.get=function(e){var t=r[e];return t&&t.id===e?t:null},e.load=function(e){var a=function(){for(var e=r.length,t=1;t<e;++t)if(0===r[t].total)return t;return r[e]=new E,r[e].id=e,e}(),T=r[a];T.total=e.urls.length,T.flags=e.flags,T.gl=e.gl||(GL?GL.currentContext.GLctx:null);var _=e.basePath;_&&"/"!==_.charAt(_.length-1)&&(_+="/");for(var i=0!=(2&e.formatMask)&&t,n=0;n<T.total;++n){var l=e.urls[n];if(l){if(_&&(l=_+l),i){var A=l.lastIndexOf(".");A>=0&&(l=l.substring(0,A)+".webp")}var u=new Image;T.images[n]=u,u.onload=function(){var e=r[a];if(++e.loaded,e.progress=e.loaded/e.total*100|0,e.loaded===e.total){var t=e.images[0];e.w=t.width,e.h=t.height;var E=e.gl;if(E){var T=!!(1&e.flags);T&&E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);var _=!!(2&e.flags),i=E.createTexture();if(_){var n=[E.TEXTURE_CUBE_MAP_POSITIVE_X,E.TEXTURE_CUBE_MAP_NEGATIVE_X,E.TEXTURE_CUBE_MAP_POSITIVE_Y,E.TEXTURE_CUBE_MAP_NEGATIVE_Y,E.TEXTURE_CUBE_MAP_POSITIVE_Z,E.TEXTURE_CUBE_MAP_NEGATIVE_Z];E.bindTexture(E.TEXTURE_CUBE_MAP,i);for(var l=0;l<n.length;++l)E.texImage2D(n[l],0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,e.images[l]);E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_CUBE_MAP,E.TEXTURE_MAG_FILTER,E.LINEAR)}else E.bindTexture(E.TEXTURE_2D,i),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,t),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR),E.bindTexture(E.TEXTURE_2D,null);if(T&&E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texture=i,GL){var A=GL.getNewId(GL.textures);i.name=A,GL.textures[A]=i,e.textureID=A}}}},u.src=l}}return a},Object.defineProperty(e,"__esModule",{value:!0}),e}({});//# sourceMappingURL=texture-loader.js.map
